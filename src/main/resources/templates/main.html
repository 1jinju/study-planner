<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>StudyingWith</title>
</head>
<body>
    <h1>StudyingWith</h1>
    <div sec:authorize="isAuthenticated()">
        <span th:text="${membername}"></span>
    <p th:text="${member.membername}"></p>
    <a class="button" sec:authorize="isAuthenticated()" th:href="@{/member/logout}">로그아웃</a>
å
    <nav th:fragment="nav">
        <button id="addPlannerButton" type="button">플래너 추가</button>
        <form id="addPlannerForm" th:action="@{/planner/add}" th:method="post" style="display: none;">
            <input type="text" name="title" placeholder="플래너 제목" required>
            <button type="submit">확인</button>
        </form>

        <ul>
            <!-- 왼쪽 네비게이션 바 -->
            <li th:each="planner : ${plannerList}">
                <a th:href="@{/goal/planner/{planner_id}(planner_id=${planner.id})}" th:text="${planner.title}"></a>
                <!--플래너 수정-->
                <form id="putPlannerForm" th:action="@{/planner/{id}/put (id=${planner.id})}" th:method="post" style="display: none;">
                    <input type="hidden" name="id" th:value="${planner.id}">
                    <input type="text" name="title" placeholder="새로운 플래너 제목" required>
                    <button type="submit">확인</button>
                </form>
                <button id="putPlannerButton" type="button">수정</button>
                <!--플래너 삭제-->
                <form th:action="@{/planner/{id}/delete (id=${planner.id})}" th:method="post">
                    <input type="hidden" name="id" th:value="${planner.id}">
                    <button type="submit">삭제</button>
                </form>

            </li>
        </ul>
    </nav>

    <script th:inline="javascript">
        var addButton = document.getElementById('addPlannerButton');
        var form = document.getElementById('addPlannerForm');

        addButton.addEventListener('click', function() {
            form.style.display = 'block';
        });

        var putButton = document.getElementById('putPlannerButton');
        var putForm = document.getElementById('putPlannerForm');

        putButton.addEventListener('click', function() {
            putForm.style.display = 'block';
        });
    </script>
</body>
</html>